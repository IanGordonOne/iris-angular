<section ng-init="findOne()">
  <div class="col-md-8 col-md-offset-2 msg-col">
    <message msg-data="msg" page-info="info" ng-repeat="msg in [message]"></message>
    <div class="panel panel-info">
      <div class="panel-heading">
        Message origin verified by:
        <a ng-if="false" ng-bind="message.signerName||message.signer_keyid" ui-sref="identities.show({type: 'keyID', value: message.signer_keyid })"></a>
        <strong ng-if="verifiedBy">
          <a ui-sref="identities.show({ type: 'keyID', value: message.signer_keyid })" class="id-link">
            <span class="distance-container mar-right10">
              <identicon id="verifiedBy" class="" border="3" width="35" positive-score="verifiedBy.pos" negative-score="verifiedBy.neg"></identicon>
              <span ng-if="verifiedBy.dist >= 0" class="distance" ng-bind="verifiedBy.dist | ordinal"></span>
            </span>
            <span ng-bind="verifiedBy.name"></span> <small>{{message.signer_keyid}}</small>
          </a>
        </strong>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              From
            </h3>
          </div>
          <div class="panel-body">
            <ul class="list list-unstyled">
              <li ng-repeat="id in message.data.author"><span ng-bind="id[0]"></span>: <a ng-bind="id[1]" class="id-link" ui-sref="identities.show({ type: id[0], value: id[1] })" data-original-title="" title=""></a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">
              To
            </h3>
          </div>
          <div class="panel-body">
            <ul class="list list-unstyled">
              <li ng-repeat="id in message.data.recipient"><span ng-bind="id[0]"></span>: <a ng-bind="id[1]" class="id-link" ui-sref="identities.show({ type: id[0], value: id[1] })" data-original-title="" title=""></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
          Details
        </h3>
      </div>
      <div class="panel-body">
        <p ng-repeat="(key, value) in message.data" ng-if="key != 'recipient' && key != 'author'">
          <b>{{key}}:</b> {{value}}
        </p>
      </div>
    </div>
    <p><button class="btn btn-default" ng-click="collapseRawData = !collapseRawData">Show raw data</button></p>
    <pre uib-collapse="!collapseRawData" ng-bind="message.strData"></pre>
  </div>
</section>
